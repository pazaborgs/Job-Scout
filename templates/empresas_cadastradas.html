{% extends 'base.html' %}{% load static %} {% block 'head' %}
<link href= "{% static '/styles/empresas_cadastradas.css' %}" rel="stylesheet" />
{% endblock%} {% block 'body' %}

<div class="wrapper">
  <div class="whitebox">
    <div class="container-fluid">
      {% if messages %} {% for message in messages %}
      <section class="alert {{message.tags}}">{{message}}</section>
      {% endfor %} {% endif %}

      <div class="row pt-5 pb-5 border-bottom border-info">
        <div class="col-md-7 d-flex justify-content-center mb-4 mb-md-0">
          <h2 class="text-center m-0">Empresas Cadastradas</h2>
        </div>
        <div class="col-md-5 d-flex justify-content-center mb-4 mb-md-0">
          <a class="btn btn-primary whitebox__ncompanybtn" href="{% url 'nova_empresa' %}" role="button">Nova Empresa</a> 
        </div>
      </div>
    </div>

    <form action="{% url 'empresas_cadastradas' %}" method="GET">
        <div class="container p-4">

          <div class="row">
            <div class="col-md-7 mb-4 mb-md-0">
              <input
                type="text"
                placeholder="Busque pelo nome"
                class="form-control"
                name="name"
              />
            </div>

            <div class="col-md-3 mb-4 mb-md-0">
              <select class="form-select" aria-label="Default select example" id="inputGroupSelect01" name="technologies">
                {% for tech in techs%}
                <option value="{{tech.id}}">{{tech}}</option>
                {% endfor %}
              </select>
            </div>

            <div class="col-md d-flex justify-content-end mb-4 mb-md-0">
              <input
                type="submit"
                value="Filtrar"
                class="btn btn-primary btn__filtro"
              />
            </div>
          </div>
        </div>
      </form>

      <div class="table-responsive">
      <table class="table">
        <tbody>
        {% for company in companies%}
          <tr class ="d-flex p-2 justify-content-around align-middle">
            <td>
              <a href="{% url 'empresa_unica' company.id  %}">
              {{company.name}}
              </a>
            </td>
            <td>{{company.headquarters}}</td>

            <td>
              <select class="form-select" aria-label="Default select example" id="inputGroupSelect01">
                {% for tech in company.technologies.all %}
                <option>{{tech}}</option>
                {% endfor %}
              </select>
            </td>

            <td>
              {% if Company.qtd_vagas > 0 %}
              <img src="{% static '/assets/flag_green.png' %}" />
              {% else %}
              <img src="{% static '/assets/flag_red.png' %}" />
              {% endif %} {{Company.qtd_vagas}}
            </td>

            <td>
              <a class="btn btn-primary btn__excluir" href="{% url 'excluir_empresa' company.id %}" role="button"><i class="ri-delete-bin-6-line"></i></a> 
            </td>
          </tr>
          {% endfor %}
        
        </tbody>
      </table>
      </div>
    </div>
  </div>
</div>

{% endblock%}
